0x52

medium

# User has no slippage protection if they choose to not to repay the debt tokens obtained from the swap in IchiVaultSpell

## Summary

When making the swap subcall in IchiVaultSpell#withdrawInternal the swap is called with no slippage protection at all. Normally borrow tokens would be transferred from IchiVaultSpell by the bank to repay debt. This provides a soft slippage protection because if the swap doesn't yield enough borrow tokens to cover amountRepay then the transaction will revert when making the transfer. However, if the user does not wish to repay any borrow tokens then they have no slippage protection and their entire swap can be stolen via a sandwich attack.

## Vulnerability Detail

## Impact

## Code Snippet

## Tool used

Manual Review

## Recommendation

Implement slippage protection by checking the return values from the swapPool.swap subcall