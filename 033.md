0x52

high

# BlueBerryBank#withdrawLend will cause underlying token accounting error if soft/hard vault has withdraw fee

## Summary

Soft/hard vaults can have a withdraw fee. This takes a certain percentage from the user when they withdraw. The way that the token accounting works in BlueBerryBank#withdrawLend, it will only remove the amount returned by the hard/soft vault from pos.underlying amount. If there is a withdraw fee, underlying amount will not be decrease properly and the user will be left with phantom collateral that they can still use.

## Vulnerability Detail

## Impact

## Code Snippet

## Tool used

Manual Review

## Recommendation
