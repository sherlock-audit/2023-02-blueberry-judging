0x52

high

# Liquidation logic is incorrect when user has debt to more than one bank

## Summary

The logic in BlueBerrryBank#liquidate gives the liquidator collateral based on the amount of debt share repaid. The issues is that is uses the debt share for the specific debt token being repaid. If the user has debt to multiple banks then repaying one of the debt tokens will award all the user's collateral but leave them with debt to the other banks. The result is that all other debt is now bad because all the collateral has been removed.

## Vulnerability Detail

## Impact

## Code Snippet

## Tool used

Manual Review

## Recommendation
